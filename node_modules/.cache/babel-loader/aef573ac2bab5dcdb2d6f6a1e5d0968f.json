{"ast":null,"code":"export function addTeamDB(data) {\n  var DBOpenRequest = window.indexedDB.open(\"WalnicDB\", 1);\n\n  DBOpenRequest.onsuccess = function (event) {\n    var db = DBOpenRequest.result;\n    var transaction = db.transaction([\"Team\"], \"readwrite\");\n    var objectStore = transaction.objectStore(\"Team\");\n    var objectStoreRequest = objectStore.add(data);\n  };\n}\n;\nexport function fetchTeams() {\n  var DBOpenRequest = window.indexedDB.open(\"WalnicDB\", 1);\n  var teams = [];\n\n  DBOpenRequest.onsuccess = function (event) {\n    var db = DBOpenRequest.result;\n    var tx = db.transaction('Team', 'readonly');\n    var store = tx.objectStore('Team'); // Desgraciadamente, todo sigue siendo asíncrono y lo que podría ser\n    // un sencillo y lineal bucle se convierte en callbacks\n\n    store.openCursor().onsuccess = function (event) {\n      var cursor = event.target.result; // cursor será truthy mientras haya elementos que procesar\n\n      if (cursor) {\n        // En cursor.value tenemos el elemento actual\n        var current = cursor.value;\n        teams.push(current); // Pasamos a procesar el siguiente resultado\n\n        cursor.continue();\n      }\n    };\n  };\n\n  return teams;\n}\n;","map":{"version":3,"sources":["/root/Escritorio/examen/walnic/src/db.js"],"names":["addTeamDB","data","DBOpenRequest","window","indexedDB","open","onsuccess","event","db","result","transaction","objectStore","objectStoreRequest","add","fetchTeams","teams","tx","store","openCursor","cursor","target","current","value","push","continue"],"mappings":"AAEA,OAAO,SAASA,SAAT,CAAmBC,IAAnB,EAAyB;AAC9B,MAAIC,aAAa,GAAGC,MAAM,CAACC,SAAP,CAAiBC,IAAjB,CAAsB,UAAtB,EAAkC,CAAlC,CAApB;;AACAH,EAAAA,aAAa,CAACI,SAAd,GAA0B,UAASC,KAAT,EAAgB;AACxC,QAAIC,EAAE,GAAGN,aAAa,CAACO,MAAvB;AACA,QAAIC,WAAW,GAAGF,EAAE,CAACE,WAAH,CAAe,CAAC,MAAD,CAAf,EAAyB,WAAzB,CAAlB;AACA,QAAIC,WAAW,GAAGD,WAAW,CAACC,WAAZ,CAAwB,MAAxB,CAAlB;AACA,QAAIC,kBAAkB,GAAGD,WAAW,CAACE,GAAZ,CAAgBZ,IAAhB,CAAzB;AACD,GALD;AAQD;AAAA;AAED,OAAO,SAASa,UAAT,GAAsB;AAE3B,MAAIZ,aAAa,GAAGC,MAAM,CAACC,SAAP,CAAiBC,IAAjB,CAAsB,UAAtB,EAAkC,CAAlC,CAApB;AACA,MAAIU,KAAK,GAAG,EAAZ;;AACAb,EAAAA,aAAa,CAACI,SAAd,GAA0B,UAASC,KAAT,EAAgB;AACxC,QAAIC,EAAE,GAAGN,aAAa,CAACO,MAAvB;AACA,QAAIO,EAAE,GAAGR,EAAE,CAACE,WAAH,CAAe,MAAf,EAAuB,UAAvB,CAAT;AACA,QAAIO,KAAK,GAAGD,EAAE,CAACL,WAAH,CAAe,MAAf,CAAZ,CAHwC,CAKxC;AACA;;AAEAM,IAAAA,KAAK,CAACC,UAAN,GAAmBZ,SAAnB,GAA+B,UAASC,KAAT,EAAgB;AAC7C,UAAIY,MAAM,GAAGZ,KAAK,CAACa,MAAN,CAAaX,MAA1B,CAD6C,CAE7C;;AACA,UAAIU,MAAJ,EAAY;AACV;AACA,YAAIE,OAAO,GAAGF,MAAM,CAACG,KAArB;AACAP,QAAAA,KAAK,CAACQ,IAAN,CAAWF,OAAX,EAHU,CAIV;;AACAF,QAAAA,MAAM,CAACK,QAAP;AACD;AACF,KAVD;AAWD,GAnBD;;AAsBA,SAAOT,KAAP;AACD;AAAA","sourcesContent":["\n\nexport function addTeamDB(data) {\n  var DBOpenRequest = window.indexedDB.open(\"WalnicDB\", 1);\n  DBOpenRequest.onsuccess = function(event) {\n    var db = DBOpenRequest.result;\n    var transaction = db.transaction([\"Team\"], \"readwrite\");\n    var objectStore = transaction.objectStore(\"Team\");\n    var objectStoreRequest = objectStore.add(data);\n  };\n\n\n};\n\nexport function fetchTeams() {\n\n  var DBOpenRequest = window.indexedDB.open(\"WalnicDB\", 1);\n  var teams = [];\n  DBOpenRequest.onsuccess = function(event) {\n    var db = DBOpenRequest.result;\n    var tx = db.transaction('Team', 'readonly');\n    var store = tx.objectStore('Team');\n\n    // Desgraciadamente, todo sigue siendo asíncrono y lo que podría ser\n    // un sencillo y lineal bucle se convierte en callbacks\n\n    store.openCursor().onsuccess = function(event) {\n      var cursor = event.target.result;\n      // cursor será truthy mientras haya elementos que procesar\n      if (cursor) {\n        // En cursor.value tenemos el elemento actual\n        var current = cursor.value;\n        teams.push(current);\n        // Pasamos a procesar el siguiente resultado\n        cursor.continue();\n      }\n    };\n  };\n\n\n  return teams;\n};\n"]},"metadata":{},"sourceType":"module"}