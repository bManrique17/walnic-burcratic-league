{"ast":null,"code":"export function addTeamDB(data) {\n  var DBOpenRequest = window.indexedDB.open(\"WalnicDB\", 1);\n  var db = DBOpenRequest.result;\n  /*\n  DBOpenRequest.onsuccess = function(event) {\n    db = DBOpenRequest.result;\n  };\n  */\n\n  var transaction = db.transaction([\"Team\"], \"readwrite\");\n  var objectStore = transaction.objectStore(\"Team\");\n  var objectStoreRequest = objectStore.add(data);\n}\n;\nexport function fetchTeams() {\n  var DBOpenRequest = window.indexedDB.open(\"WalnicDB\", 1);\n  var db = DBOpenRequest.result;\n  var tx = db.transaction('Team', 'readonly');\n  var store = tx.objectStore('Team');\n  var teams = []; // Desgraciadamente, todo sigue siendo asíncrono y lo que podría ser\n  // un sencillo y lineal bucle se convierte en callbacks\n\n  store.openCursor().onsuccess = function (event) {\n    var cursor = event.target.result; // cursor será truthy mientras haya elementos que procesar\n\n    if (cursor) {\n      // En cursor.value tenemos el elemento actual\n      var current = cursor.value;\n      teams.push(current); // Pasamos a procesar el siguiente resultado\n\n      cursor.continue();\n    }\n  };\n\n  return teams;\n}\n;","map":{"version":3,"sources":["/root/Escritorio/examen/walnic/src/db.js"],"names":["addTeamDB","data","DBOpenRequest","window","indexedDB","open","db","result","transaction","objectStore","objectStoreRequest","add","fetchTeams","tx","store","teams","openCursor","onsuccess","event","cursor","target","current","value","push","continue"],"mappings":"AAEA,OAAO,SAASA,SAAT,CAAmBC,IAAnB,EAAyB;AAC9B,MAAIC,aAAa,GAAGC,MAAM,CAACC,SAAP,CAAiBC,IAAjB,CAAsB,UAAtB,EAAkC,CAAlC,CAApB;AACA,MAAIC,EAAE,GAAGJ,aAAa,CAACK,MAAvB;AACA;;;;;;AAKA,MAAIC,WAAW,GAAGF,EAAE,CAACE,WAAH,CAAe,CAAC,MAAD,CAAf,EAAyB,WAAzB,CAAlB;AACA,MAAIC,WAAW,GAAGD,WAAW,CAACC,WAAZ,CAAwB,MAAxB,CAAlB;AACA,MAAIC,kBAAkB,GAAGD,WAAW,CAACE,GAAZ,CAAgBV,IAAhB,CAAzB;AACD;AAAA;AAED,OAAO,SAASW,UAAT,GAAsB;AAE3B,MAAIV,aAAa,GAAGC,MAAM,CAACC,SAAP,CAAiBC,IAAjB,CAAsB,UAAtB,EAAkC,CAAlC,CAApB;AACA,MAAIC,EAAE,GAAGJ,aAAa,CAACK,MAAvB;AAGA,MAAIM,EAAE,GAAGP,EAAE,CAACE,WAAH,CAAe,MAAf,EAAuB,UAAvB,CAAT;AACA,MAAIM,KAAK,GAAGD,EAAE,CAACJ,WAAH,CAAe,MAAf,CAAZ;AACA,MAAIM,KAAK,GAAG,EAAZ,CAR2B,CAS3B;AACA;;AAEAD,EAAAA,KAAK,CAACE,UAAN,GAAmBC,SAAnB,GAA+B,UAASC,KAAT,EAAgB;AAC7C,QAAIC,MAAM,GAAGD,KAAK,CAACE,MAAN,CAAab,MAA1B,CAD6C,CAE7C;;AACA,QAAIY,MAAJ,EAAY;AACV;AACA,UAAIE,OAAO,GAAGF,MAAM,CAACG,KAArB;AACAP,MAAAA,KAAK,CAACQ,IAAN,CAAWF,OAAX,EAHU,CAIV;;AACAF,MAAAA,MAAM,CAACK,QAAP;AACD;AACF,GAVD;;AAWA,SAAOT,KAAP;AACD;AAAA","sourcesContent":["\n\nexport function addTeamDB(data) {\n  var DBOpenRequest = window.indexedDB.open(\"WalnicDB\", 1);\n  var db = DBOpenRequest.result;\n  /*\n  DBOpenRequest.onsuccess = function(event) {\n    db = DBOpenRequest.result;\n  };\n  */\n  var transaction = db.transaction([\"Team\"], \"readwrite\");\n  var objectStore = transaction.objectStore(\"Team\");\n  var objectStoreRequest = objectStore.add(data);\n};\n\nexport function fetchTeams() {\n\n  var DBOpenRequest = window.indexedDB.open(\"WalnicDB\", 1);\n  var db = DBOpenRequest.result;\n  \n\n  var tx = db.transaction('Team', 'readonly');\n  var store = tx.objectStore('Team');\n  var teams = [];\n  // Desgraciadamente, todo sigue siendo asíncrono y lo que podría ser\n  // un sencillo y lineal bucle se convierte en callbacks\n\n  store.openCursor().onsuccess = function(event) {\n    var cursor = event.target.result;\n    // cursor será truthy mientras haya elementos que procesar\n    if (cursor) {\n      // En cursor.value tenemos el elemento actual\n      var current = cursor.value;\n      teams.push(current);\n      // Pasamos a procesar el siguiente resultado\n      cursor.continue();\n    }\n  };\n  return teams;\n};\n"]},"metadata":{},"sourceType":"module"}